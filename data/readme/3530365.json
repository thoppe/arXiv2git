{
  "README": "-*- mode: org; -*-\n* log\n** <2013-02-23 Sat>\n   python web_galery.py trainning3/3\n   python ../makeHtmlTable/makeHtmlTable.py \"3/*_preview.png\"\n   sed \"s/\\_detail.png/\\_detail.svg/g\" 3.html > 3_svg.html\n\n** <2012-09-27 Thu>\n*** scp test_cluster form main --> normalize\n\n*** problems\n**** na maie neni pyfits (fitsio)\n**** na taurus nechdi novy fitsits\n**** data/test_   contains normalized files\n\n** <2012-08-01 Wed>\n   [[https://stelweb.asu.cas.cz/wiki/index.php/Correct_names.sql]]\n\n** <2012-07-29 Sun>\n\n   gsc catalog\n   http://archive.stsci.edu/gsc/\n\n   regex search in list \n   [i for i, item in enumerate(ra) if re.search('pyfits', item)]\n\n   list of catalogs\n   http://stupendous.rit.edu/tass/catalogs/catalogs.html\n\n   good catalog?\n   http://www.aavso.org/apass/\n\n   convert ra, to degrees\n   [[http://www.atnf.csiro.au/people/Enno.Middelberg/python/python.html]]\n\n   scripts bin/dec2deg.py\n           bin/ra2deg.py\n   created library lib/convert.py \n\n** <2012-07-25 Wed>\n   examples of normalized spectras\n   [[http://physics.muni.cz/~vazny/thesisReloaded/sample_of_normalized_spectra/]]\n   \n   <2012-07-24 Tue>\n   script renormalized\n\n\n** <2012-06-01 Fri>\n*** Ondrejov\n    Stazeni celeho ond archivu\n    analyza\n \n** <2012-05-22 Tue> \n*** pollux.asu.cas.cz doesnot work!\n*** tapsh seems the way to go!\n    http://vo.ari.uni-heidelberg.de/soft/tapsh\n    http://docs.g-vo.org/tapsh-manual.html\n\n    pyfits has to be install via aptitude not pip\n\n*** simbad TAP\n    http://simbad.u-strasbg.fr/simbad/sim-tap\n\n* TODO\n** Bezier\n   [[http://processingjs.nihongoresources.com/bezierinfo/]]\n   [[http://stackoverflow.com/questions/12643079/bezier-curve-fitting-with-scipy]]\n\n* DONE\n** Make trainning3 visible on wiki and inform Pavla and Petr\n** Finish program ema (EmissionManualAnalyzer)\n\n** Use ema to classify ond fits\n*** categories\n**** emission\n**** emisson sometimes\n**** pcygni\n**** pcygni sometimes\n**** pcygni never\n**** emission never\n\n\n** Download rest of the programs of sdss [31/31]\n   survey\tprogramname\tColumn1\n- [X] sdss\tapbias\t1920\n- [X] sdss\tcommissioning\t1920\n- [X] sdss\tdisk\t10240\n- [X] sdss\tfstars\t5120\n- [X] sdss\thyades\t640\n- [X] sdss\tlegacy\t1232640\n- [X] sdss\tlowz\t5760\n- [X] sdss\tlowz_loveday\t640\n- [X] sdss\tlowz_lrg\t28160\n- [X] sdss\tm31_fstars\t1920\n- [X] sdss\tmsturnoff\t5120\n- [X] sdss\torion\t5120\n- [X] sdss\tperseus\t1280\n- [X] sdss\tphotoz\t12160\n- [X] sdss\tpreboss\t6400\n- [X] sdss\tpremarvels_preselection\t12800\n- [X] sdss\treddening\t5760\n- [X] sdss\tsouthern\t85760\n- [X] sdss\ttaurus\t1920\n- [X] segue1\tsegcluster\t9600\n- [X] segue1\tsegclusterf\t5120\n- [X] segue1\tseglowlat\t8960\n- [X] segue1\tseglowlatf\t7040\n- [X] segue1\tsegpointed\t10240\n- [X] segue1\tsegpointedf\t10240\n- [X] segue1\tsegtest\t7040\n- [X] segue1\tsegtestf\t2560\n- [X] segue1\tsegue\t115200\n- [X] segue1\tseguefaint\t106880\n- [X] segue2\tsegcluster\t1280\n- [X] segue2\tsegue2\t133760\n\n*** SQL for links of sdss programs\n    SELECT  'wget '+ '\"'+ dbo.fGetUrlFitsSpectrum(s.specObjID)+ '\"' + ' -O ' + p.programname + '\\' + CAST(s.specObjID as varchar(max)) + '.fits' \n    INTO mydb.sdss_all_without_legacy_southern\n    FROM SpecPhotoAll s, platex p\n    WHERE s.specObjID is not null\n    AND s.plateid = p.plateid\n    AND p.programname not in ( 'legacy', 'southern')\n    and p.survey ='sdss'\n    order by p.programname, s.specObjID\n*** dirs for sdss programs\n    cut -f2 sdss | xargs mkdir\n\n** Find color indexes\n** Use Object Oriented Database for parametres storage  ?\n*** [[http://www.sqlalchemy.org/]]\n*** [[http://code.google.com/p/pykesto/wiki/WhyNotTheAlternatives]]\n** Analyzator fits --> web\n** Color indexes\n** SQL group by # specter (science primary ..etc)\n\n** Color transformation\n   [[http://arxiv.org/pdf/0711.4356v1.pdf]]\n\n\n\n** List of programs in surveys\n   SELECT p.programname \n   FROM SpecPhotoAll s, platex p\n   WHERE s.specObjID is not null\n   AND s.plateid = p.plateid\n   AND p.survey = 'segue1'\n   group by p.survey,p.programname\n   order by p.survey, p.programname\n\n\n  not in database 3533121815952072704\n  \n\n** ab_normal script\n   check and move unnormalized fits\n   on taurus created trainnin3\n** all spectra sorted \n   vazny@taurus.physics.muni.cz:public_html/thesisReloaded/trainning2/\n** Solved? problem with crashing ema_local\n** Downloaded all spectra from Ondrejov\n** Check download directory vs name in th fits\n   def obj(name):\n       hdu = pyfits.open(name)\n       f.write(hdu[0].header['OBJECT']+ ','+ name.split('/')[1] + '\\n')\n** Classification of Ondrejov spectra\n   divided into 7 categories\n\n** web pages of classified trainnig sample of ond spectra\n   for i in ?; do mkdir $i/thm;done\n   [[http://physics.muni.cz/~vazny/wiki/index.php/OndTrainningSample]]\n\n\n** ema\n*** ready for real test!!!\n*** download votable.xml for stars from server\n*** download spectra into download/star/*.fits\n*** moving inot categories\n** run corrupt.py on segue1, segue2, sdss\n** modified corrupt.py to check subdirectories\n** dirlist program for checking download statu\n** downloaded fits from sdss survey\n** Processed corrupted spectra segue1 [10/10]\n   - [X] segcluster\n   - [X] segclusterf\n   - [X] seglowlat\n   - [X] seglowlatf\n   - [X] segpointed\n   - [X] segpointedf\n   - [X] segtest\n   - [X] segtestf\n   - [X] segue\n   - [X] seguefaint\n\n** Processed spectra segue2 [2/2]\n   - [X] segcluster\n   - [X] segue2\n\n   Results in log/\n\n** Download segue1 [10/10]\n   - [X] segcluster\n   - [X] segclusterf\n   - [X] seglowlat\n   - [X] seglowlatf\n   - [X] segpointed\n   - [X] segpointedf\n   - [X] segtest\n   - [X] segtestf\n   - [X] segue\n   - [X] seguefaint\n\n** Download segue2 [2/2]\n   - [X] segcluster\n   - [X] segue2\n\n\n** SDSS Caveats\n   [[http://www.sdss.org/dr7/products/spectra/index.html#caveats]]\n\n** Getting Started with SEGUE\n   [[http://www.sdss3.org/surveys/segue2.php#GettingStarted]]\n** Avoiding Duplicates\n   as described here [[http://www.sdss3.org/dr8/algorithms/segueii/segue_sqlcookbook.php#Tables]]\n   object with sciencePrimary = 1 should by unique. The list of non/unique objects could be obtained via\n\n   SELECT p.programname,sciencePrimary, count(*)\n   FROM SpecPhotoAll s, platex p\n   WHERE s.specObjID is not null\n   AND s.plateid = p.plateid\n   and p.survey like 'segue%'\n   group by p.programname,sciencePrimary \n   order by p.programname,sciencePrimary \n\n\n\n** Tables decriptions of DR8 SEGUE\n   [[http://www.sdss3.org/dr8/algorithms/segueii/segue_sqlcookbook.php#Tables]]\n\n** transform log ot copy script to get corrupted fits\n   sed -E 's:^../segue/([^ ]*)(.*):cp ../segue/\\1 ../corrupt_segue/\\1:' ../log/corrupt_segue.log > copy_corrupt_segue.sh\n** corrupt.py also write naxis2 and difference between # of corrupted pixels and naxis2\n** get ubv for Be stars from simbad\n*** tap and adq in simbad\n    [[http://simbad.u-strasbg.fr/simbad/images/tables.png][simbad tables]]\n*** query\nSELECT basic.OID,\n       RA,\n       DEC,\n       main_id AS \"Main identifier\",\n       coo_bibcode AS \"Coord Reference\",\n       nbref AS \"NbReferences\",\n       f1.flux as B, f2.flux as V, f3.flux as U, f4.flux as J, f5.flux as H, f6.flux as K\nFROM basic  JOIN ident i ON i.oidref = oid JOIN flux f1 ON f1.oidref = oid JOIN flux f2 ON f2.oidref = oid JOIN flux f3 on f3.oidref = oid JOIN flux f4 ON f4.oidref = oid JOIN flux f5 on f5.oidref = oid JOIN flux f6 on f6.oidref = oid\nWHERE f1.filter = 'B'\nAND f2.filter = 'V'\nAND f3.filter ='U'\nAND f4.filter ='J'\nAND f5.filter = 'H'\nAND f6.filter = 'K'\nAND id in (\n'HD 224699',\n'V* V639 Cas',\n'HD 225095',\n'*  10 Cas',\n'V* SX Cas',\n'V* V742 Cas',\n'TYC 4026-362-1',\n'* kap Cas',\n'HD 232214',\n'BD+63\t 82',\n'* omi Cas',\n'BD+65\t 91',\n'HD   4931',\n'* gam Cas',\n'HD 6226',\n'HD   6343',\n'* phi And',\n'V* V764 Cas',\n'HD   7720',\n'HD 236737',\n'HD   9709',\n'HD   9612',\n'V* V771 Cas',\n'V* phi Per',\n'HD  10664',\n'V* V978 Cas',\n'HD 232525',\n' *  eps Cas',\n'V* V777 Cas',\n'V* V472 Per',\n'BD+82\t 50',\n'V* V787 Cas',\n'HD  13867',\n'V* V551 Per',\n'V* V520 Per',\n'V* V554 Per',\n'V* V788 Cas',\n'HD  18552',\n'V* RX Cas',\n'V* V801 Cas',\n'HD  20134',\n'V* BK Cam',\n'HD  20899',\n'TYC 3320-1861-1',\n'HD  21455',\n'HD  21650',\n'HD  21641',\n'* psi Per',\n'V* CT Cam',\n'HD  22780',\n'*  13 Tau',\n'17 Tau\t',\n'*  23 Tau',\n'eta Tau',\n'HD  23552',\n'BU Tau\t',\n'HD  23800',\n'V* X Per',\n'HD  24479',\n'NAME Menkhib',\n'* c Per',\n'HD  26398',\n'V* CI Cam',\n'* 228 Eri',\n'*  56 Eri',\n'HD  29866',\n'* alf Cam',\n'V* AB Aur',\n'HD 284012',\n'V* eps Aur',\n'*  11 Cam',\n'* 105 Tau',\n'V* lam Eri',\n'V* V416 Aur',\n'NAME RIGEL',\n'*  12 Aur',\n'V* V1369 Ori',\n'*  HD 34921',\n'V* eta Ori',\n'*  25 Ori',\n'V* V1372 Ori',\n'V* V1374 Ori',\n'HR 1847A',\n'* 120 Tau',\n'HD  36861',\n'HD  37115',\n'NAME ALNILAM A',\n'* zet Tau',\n'HD  37330',\n'* ome Ori',\n'HD  37971',\n'V* V434 Aur',\n'V* V731 Tau',\n'V* V1165 Tau',\n'HD 246878',\n'HD  39478',\n'*  62 Ori',\n'V* V696 Mon',\n'V* V447 Aur',\n'*  17 Lep',\n'HD  42406',\n'HD  43285',\n'HD  43544',\n'V* V1308 Ori',\n'V* FR CMa',\n'HD  44996',\n'V* PZ Gem',\n'V* FS CMa',\n'bet Mon A',\n'bet Mon C',\n'*  18 Gem',\n'V* AX Mon',\n'HD  45995',\n'V* QQ Gem',\n'HD  47054',\n'V* S Mon',\n'V* KS CMa',\n'V* V743 Mon',\n'V* V742 Mon',\n'HD  50820',\n'AU Mon\t',\n'V* V744 Mon',\n'HD  50658',\n'V* QY Gem',\n'V* OY Gem',\n'V* FU CMa',\n'V* GU CMa',\n'V* V637 Mon',\n'V* V749 Mon',\n'HD  53416',\n'V* FV CMa',\n'HD  55271',\n'V* EW CMa',\n'V* ome CMa',\n'HD  56039',\n'V* OT Gem',\n'V* FW CMa',\n'V* FY CMa',\n'* bet CMi',\n'V* V378 Pup',\n'V* BN Gem',\n'HD  61224',\n'BR CMi\t',\n'HD  62367',\n'V* FF Cam',\n'* omi Pup',\n'HD  64109',\n'V* BT CMi',\n'V* UX Mon',\n'V* V695 Mon',\n'V* V420 Pup',\n'HD  71072',\n'HD  81357',\n'HD  83953',\n'HD  86612',\n'*  17 Sex',\n'HD  89884',\n'HD  91120',\n'gam UMa',\n'* zet Crv',\n'* kap Dra',\n'V* tet CrB',\n'V* V1040 Sco',\n'V* V839 Her',\n'*  48 Lib',\n'V* AG Dra',\n'BD+79\t499',\n'V* chi Oph',\n'* zet Oph',\n'V* XX Oph',\n'V* V2385 Oph',\n'BD+23  3183',\n'HD 162428',\n'V* V744 Her',\n'V* RS Oph',\n'*  66 Oph',\n'V* V974 Her',\n'V* V4379 Sgr',\n'V* YY Her',\n'V* MY Ser',\n'HD 168135',\n'HD 168957',\n'V* NW Ser',\n'HD 169033',\n'BD+16  3492',\n'V* V4031 Sgr',\n'V* V431 Sct',\n'HD 171219',\n'V* V532 Lyr',\n'HD 171780',\n'HD 173292',\n'HD 173219',\n'HD 173371',\n'V* CX Dra',\n'HD 174105',\n'V* bet Lyr',\n'HD 175511',\n'HD 174886',\n'HD 175863',\n'*  64 Ser',\n'HD 177648',\n'V* V4409 Sgr',\n'* iot Lyr',\n'V* V4024 Sgr',\n'HD 178515',\n'HD 179218',\n'HD 179343',\n'V* V1448 Aql',\n'HD 180398',\n'V* U Sge',\n'V* ups Sgr',\n'V* CH Cyg',\n'V* V558 Lyr',\n'HD 183261',\n'V* V923 Aql',\n'bet Cyg B',\n'V* V1294 Aql',\n'*  11 Cyg',\n'V* V341 Sge',\n'V* V1463 Aql',\n'BD+05  4285',\n'V* V1507 Cyg',\n'HD 187350',\n'V* CI Cyg',\n'V* V1339 Aql',\n'*  12 Vul',\n'V* V396 Vul',\n'V* V2028 Cyg',\n'*  25 Cyg',\n'HD 189689',\n'HD 190150',\n'V* V1362 Cyg',\n'V* V1768 Cyg',\n'HD 190944',\n'V* V448 Cyg',\n'*  28 Cyg',\n'V* BE Cap',\n'*  20 Vul',\n'HD 192445',\n'V* QR Vul',\n'V* V2113 Cyg',\n'V* LZ Del',\n'HD 193182',\n'P Cyg\t',\n'*  25 Vul',\n'V* V1972 Cyg',\n'V* V2118 Cyg',\n'V* V2119 Cyg',\n'V* V2120 Cyg',\n'HD 195554',\n'HD 195407',\n'HD 195358',\n'*   1 Del',\n'BD+47  3129',\n'V* V2123 Cyg',\n'BD+36  4145',\n'HD 196712',\n'BD+48  3184',\n'HD 197434',\n'V* alf Cyg',\n'V* V568 Cyg',\n'* lam Cyg',\n'V* V2135 Cyg',\n'*  55 Cyg',\n'BD+46  3062',\n'V* V2136 Cyg',\n'V* V417 Cep',\n'V* V418 Cep',\n'HD 199218',\n'V* V2139 Cyg',\n'HD 199579',\n'V* V1057 Cyg',\n'V* V832 Cyg',\n'V* V2144 Cyg',\n'V* V1331 Cyg',\n'V* V1931 Cyg',\n'V* V380 Cep',\n'BD+45  3377',\n'HD 200830',\n'HD 201522',\n'V* V2148 Cyg',\n'HD 239601',\n'V* V420 Cep',\n'V* V421 Cep',\n'* ups Cyg',\n'68 Cyg',\n'HD 203374',\n'V* V382 Cep',\n'HD 203356',\n'V* V2153 Cyg',\n'V* NT Peg',\n'HD 204185',\n'V* V2155 Cyg',\n'V* V2162 Cyg',\n'V* V2163 Cyg',\n'HD 205060',\n'HD 205551',\n'V* V2166 Cyg',\n'V* V433 Cep',\n'* eps Cap',\n'HD 206267',\n'BD+57  2358',\n'HD 206773',\n'BD+57  2376',\n'HD 207232',\n'HD 207329',\n'HD 207370',\n'V* AG Peg',\n'16 Peg\t',\n'V* EM Cep',\n'HD 208682',\n'BD+48  3561',\n'V* V2174 Cyg',\n'V* V439 Cep',\n'* omi Aqr',\n'HD 209552',\n'*  25 Peg',\n'BD+60  2349',\n'V* EE Cep',\n'* lam Cep',\n'V* V357 Lac',\n'*  31 Peg',\n'*  pi  Aqr',\n'HD 214167',\n'* eps PsA',\n'HD 216057',\n'14 Lac\t',\n'V* V423 Lac',\n'V* EW Lac',\n'HD 217543',\n'V* omi And',\n'* bet Psc',\n'V* KX And',\n'V* KY And',\n'V* V813 Cas',\n'HD 220582',\n'V* Z And',\n'HD 221692',\n'V* V817 Cas',\n'*   6 Cas',\n'V* V818 Cas',\n'BD+66  1651',\n'* rho Cas',\n'BD+71  1238',\n'BD+65  1970',\n'HIP 118163',\n'V* LQ And',\n'HD 224544')\n\n*** download list of be stars\n    wget https://stelweb.asu.cas.cz/stars/dbbe/upravy/vyber1.phtml --http-user=ondrejov --http-password=tajneheslo --no-check-certificate\n*** get only names from the file\n\n    awk '{print $3,$4, $5}' vyber1.phtml > be\n    sed -i 's/[0-9]\\{1,2\\}\\..*//' be \n    \n    stupid! unable to do in one step\n\n** get ugrzi from casjobs for corrupted spectra\n*** create list of ID's\n    awk '{print $1}' log/corrupt_segue2.log > log/corrupt_segue2_specObjID.log\n    sed -rni 's/[^[:digit:]]*([[:digit:]]+)\\.fits/\\1/p' log/corrupt_segue2_specObjID.log\n\n    2117866432871032832\n    2117920858696607744\n    2122348591501568000\n    .\n    .\n    2131403344785205248\n*** upload to mydb\n    \n    first insert column name\n    \n    sed -i '1i\\specObjID' log/corrupt_segue2_specObjID.log\n\n    \n** process only stras with not full corrupted spectra\n awk '{if ($2<3000){print $2}}' corrupt_segue2.log\n\n*** create list of corruption < whole spectrum\n    awk '{if ($2<3000){print \"cp \" $1 \" corrupt_segue2_small\"}}' corrupt_segue2.log >copy_corrupt_segue2_small.sh\n    awk '{if ($2<3000){print \"cp \" $1 \" corrupt_seguefaint_small\"}}' corrupt_seguefaint.log >copy_corrupt_seguefaint_small.sh\n    awk '{if ($2<3000){print \"cp \" $1 \" corrupt_segue_small\"}}' corrupt_segue.log.log >copy_corrupt_segue_small.sh\n\n*** corrupted all\n    awk '{if ($2>3000){print $2}}' corrupt_segue2.log | wc\n\n| segue2 | seguefaint | segue |\n|--------+------------+-------|\n|    908 |        580 |   431 |\n    \n*** not corrutpted all\n    awk '{if ($2<3000){print $2}}' corrupt_seguefaint.log | wc\n\n| segue2 | seguefaint | segue |\n|--------+------------+-------|\n|    398 |        303 |   222 |\n\n** Store number of zeros in fits file\n** corrupt.py too slow\n***  if not sigma.any():\n     z = len(sigma)\n** Number of spectras in individual programs\n*** stars only\n    SELECT  p.programname, count(s.specObjID)\n    INTO mydb.stars\n    FROM SpecPhotoAll s, platex p\n    WHERE s.specObjID is not null\n    AND s.plateid = p.plateid\n    AND s.class = 'STAR'\n    group by p.programname\n| programname             | Column1 |\n|-------------------------+---------|\n| reddening               |    4262 |\n| segpointedf             |    9046 |\n| m31_fstars              |    1749 |\n| segcluster              |    9955 |\n| seglowlat               |    8047 |\n| fstars                  |    4556 |\n| lowz_lrg                |    3020 |\n| perseus                 |     743 |\n| segtestf                |    2239 |\n| commissioning           |    1766 |\n| lowz                    |     623 |\n| lowz_loveday            |      52 |\n| orion                   |    4568 |\n| photoz                  |     830 |\n| segclusterf             |    4525 |\n| apbias                  |     397 |\n| msturnoff               |    4850 |\n| southern                |   39838 |\n| taurus                  |    1763 |\n| hyades                  |     274 |\n| preboss                 |    1322 |\n| seguefaint              |   93598 |\n| disk                    |    9903 |\n| premarvels_preselection |    5360 |\n| seglowlatf              |    6185 |\n| segpointed              |    9546 |\n| segtest                 |    6373 |\n| segue                   |  108712 |\n| segue2                  |  125357 |\n| legacy                  |  187342 |\n\n*** all spectra\n\n    SELECT  p.programname, count(s.specObjID)\n    INTO mydb.all1\n    FROM SpecPhotoAll s, platex p\n    WHERE s.specObjID is not null\n    AND s.plateid = p.plateid\n    group by p.programname\n\n| programname             | Column1 |\n|-------------------------+---------|\n| reddening               |    5760 |\n| segpointedf             |   10240 |\n| m31_fstars              |    1920 |\n| segcluster              |   10880 |\n| seglowlat               |    8960 |\n| commissioning           |    1920 |\n| lowz                    |    5760 |\n| lowz_loveday            |     640 |\n| orion                   |    5120 |\n| photoz                  |   12160 |\n| segclusterf             |    5120 |\n| fstars                  |    5120 |\n| lowz_lrg                |   28160 |\n| perseus                 |    1280 |\n| segtestf                |    2560 |\n| apbias                  |    1920 |\n| msturnoff               |    5120 |\n| southern                |   85760 |\n| taurus                  |    1920 |\n| hyades                  |     640 |\n| preboss                 |    6400 |\n| seguefaint              |  106880 |\n| disk                    |   10240 |\n| premarvels_preselection |   12800 |\n| seglowlatf              |    7040 |\n| segpointed              |   10240 |\n| segtest                 |    7040 |\n| segue                   |  115200 |\n| segue2                  |  133760 |\n| legacy                  | 1232640 |\n    \n* Problems\n** SOLVED \n   pf.py gets only 1846 from 1984 corrupted spectra (killed! after that)\n   \n* Solutions\n** python differenxe two list\n   c3 = set(c1).difference(set(c2))\n  \n", 
  "read_at": 1462547109, 
  "description": "Diploma thesis on steroids ", 
  "id": 3530365
}