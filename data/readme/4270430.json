{
  "README.markdown": "# OAI Harvester\nOAI Harvester with a web interface for configuration.\nCurrently available in German only.\n\nGeschrieben von Timo Schleier, [SUB G\u00f6ttingen](http://www.sub.uni-goettingen.de) <timo.schleier@sub.uni.goettingen.de>\n\u00c4nderungen von Sven-S. Porst, [SUB G\u00f6ttingen](http://www.sub.uni-goettingen.de) <porst@sub.uni-goettingen.de>\n\n\n## Einrichtung\nDer Harvester ben\u00f6tigt PHP 5.3, Zugang zu einer MySQL Datenbank und f\u00fcr die Konfigurationsoberfl\u00e4che einen apache Webserver.\n\nZur Installation, diesen Ordner \u00fcber den Webserver zug\u00e4nglich machen.\n\nZur Konfiguration einer Harvester-Instanz mit einer gegebenen <ID> folgende Schritte durchf\u00fchren:\n\n1. Anlegen eines Ordners mit Namen <ID> im Ordner configuration. Dieser Ordner enth\u00e4lt die Dateien:\n\n\t1. **db_connect.php** mit Zugangsdaten zur MySQL Datenbank, der Inhalt dieser Datei sollte folgendes Format haben:\n\n\t\t<?php\n\t\t\tdefine(\"DB_SERVER\",\t\t\"localhost\");\n\t\t\tdefine(\"DB_USERNAME\", \t\"harvest\");\n\t\t\tdefine(\"DB_PASSWORD\", \t\"\");\n\t\t\tdefine(\"DB_NAME\", \t\t\"harvest\");\n\t\t?>\n\n\t2. **settings.php** mit Einstellungen f\u00fcr Pfade und den Solr Index. Der Inhalt dieser Date sollte folgendes Format haben:\n\n\t\t<?php\n\t\t\t// MySQL Verbindungsdaten\n\t\t\tinclude(dirname(__FILE__) . '/db_connect.php');\n\n\t\t\t// Allgemein\n\t\t\tdefine(\"SERVICE_NAME\", \t\t'math-arxiv');\n\t\t\tdefine(\"SOLR\",\t\t\t\t'http://localhost:8080/solr/math-arxiv');\n\t\t\tdefine(\"DATA_FOLDER\",\t\t'/var/www/htdocs/harvester/data/math-arxiv');\n\n\t\t\t// gemeinsam genutzte Einstellungen\n\t\t\tinclude(dirname(__FILE__) . '/../settings-common.php');\n\t\t?>\n\n2. Anlegen eines Ordners mit Namen <ID> im Hauptordner. Dieser Ordner enh\u00e4lt:\n\n\t1. **.htaccess** mit dem Inhalt: `SetEnv HARVESTER_CONFIGURATION_NAME <ID>`\n\t2. **index.php**: Symlink auf ../software/index.php\n\t3. **resources**: Symlink auf ../software/resources\n\n3. Anlegen des MySQL-Datenbankschemas: Die Datei *configuration/harvester_schema.sql* enth\u00e4lt das ben\u00f6tigte Schema f\u00fcr die MySQL Datenbank. Es mu\u00df vor der ersten Nutzung dort eingespielt werden.\n4. Anlegen des Solr-Schemas: Die Datei *configuration/schema.xml* enth\u00e4lt ein Solr Indexschema, das mit den ausgegebenen Feldern klarkommt. Es mu\u00df an der entsprechenden Stelle der Solr Konfiguration abgelegt werden.\n\n### Anmerkung\nDa zur Auswahl der Sets ein Formular mit sehr vielen Eingabeelementen abgeschickt wird, mu\u00df sichergestellt sein, da\u00df die Konfiguration des Webservers diese Parameter nicht abschneidet, wenn sehr viele Sets vorhanden sind. Mit den Standardeinstellungen werden 1000 POST Parameter zugelassen, so da\u00df die Bearbeitung von knapp 500 Sets funktioniert. Einige OAI Server enhalten wesentlich mehr Sets (z.B. \u00fcber 2000 auf http://hal.archives-ouvertes.fr/oai/oai.php), so da\u00df hier die Konfiguration angepa\u00dft werden mu\u00df:\n\n* Ab PHP 5.3.9 begrenzt die Einstellung `max_input_vars` die Anzahl der Parameter (Voreinstellung vermutlich in /etc/php5/apache2/php.ini)\n* Ist Suhosin installiert, m\u00fcssen die Werte `suhosin.request.max_vars` und `suhosin.post.max_vars` hochgesetzt werden (Voreinstellung vermutlich in /etc/php5/conf.d/suhosin.ini)\n* Die Anzahl der ben\u00f6tigten Parameter sollte mindestens 3 * Anzahl der Sets + 20 sein\n\n\n## Verwaltung der OAI Quellen\nDer Harvester bietet \u00fcber den Webserver eine Oberfl\u00e4che zur Verwaltung der geharvesteten OAI Quellen an. Sie zeigt die auf den OAI-Servern verf\u00fcgbaren Sets and und erm\u00f6glicht eine Auswahl.\n\n\n## Harvesting und Indizieren\nZum Ausf\u00fchren des eigentlichen Harvestings:\n\n1. die Umgebungsvariable `HARVESTER_CONFIGURATION_NAME` auf die <ID> der gew\u00fcnschten Instanz setzen\n2. das Skript *software/scripts/harvester.php* ausf\u00fchren\n3. das Skript *software/scripts/indexer.php* ausf\u00fchren\n\nErfolgs- und Fehlermeldungen dieser Skripte sind in der Weboberfl\u00e4che einsehbar.\n\n\n## Interner Ablauf\nDie Software erf\u00e4hrt \u00fcber die Umgebungsvariable `HARVESTER_CONFIGURATION_NAME` den Namen der gew\u00fcnschten Konfiguration und l\u00e4dt dementsprechend die Einstellungen f\u00fcr Pfade und Datenbankzugriff. In der MySQL-Datenbank sind die bekannten OAI-Repositories, deren Sets und die ausgew\u00e4hlten Sets gespeichert.\n\nDie geladenen Daten werden im Datenordner data/<ID>/ abgelegt. Dieser kann folgenden Unterordner haben:\n\n* **harvest**: hier werden von harvester.php die geladenen OAI Daten abgelegt\n* **temp**: enth\u00e4lt kurzzeitig w\u00e4hrend der Konversion von OAI zu Solr anfallende Daten\n* **archive**: enth\u00e4lt zip-Dateien mit den geladenen OAI Daten und den daraus erstellten Solr-Dokumenten\n* **error**: enth\u00e4lt Dateien mit den Fehlermeldungen, die bei den Durchl\u00e4ufen von software/scripts/harvester.php und software/scripts/indexer.php aufgetreten sind\n\nDiese Ordner enthalten jeweils Unterordnerstrukturen mit dem akutellen Datum, der ID des OAI Servers und der ID des Sets. Zur leichteren Orientierung sind Dateien *source_data.txt* mit den dazugeh\u00f6rigen Namen abgelegt.\n\nDie Daten im Ordner archive k\u00f6nnen n\u00fctzlich sein, wenn die Indizierung ver\u00e4ndert werden soll. In diesem Fall mu\u00df nicht das Harvesting erneut stattfinden, sondern es k\u00f6nnen die zip Dateien entpackt werden und der Inhalt ihrer *harvest* Unterordner kann in den *harvest* Ordner gelegt werden, um dann das Skript software/scripts/indexer.php erneut zu starten. Das Skript software/scripts/reindex.php f\u00fchrt diese Schritte durch.\n\n", 
  "read_at": 1462509810, 
  "description": "OAI harvester with configuration web interface used at SUB G\u00f6ttingen", 
  "id": 4270430
}