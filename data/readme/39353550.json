{
  "read_at": 1462546484, 
  "description": "Experiments with a DSL that will parse to a FinalStateObject OWL", 
  "README.md": "# HEPOntologyParserExperiments\nExperiments with a DSL that will parse to a FinalStateObject OWL\n\n# DSL\n\nThe DSL is simple. For example, this specifies an exotics search for displaced jets (http://arxiv.org/abs/1501.04020).\n\n```\n   J1 (anti-kt-0.4): et>60 GeV, abseta < 2.5, EMF < 0.02, -1 ns < ArrivalTime < 5 ns;\n   J2 (anti-kt-0.4): et>40 GeV, abseta < 2.5, EMF < 0.02, -1 ns < ArrivalTime < 5 ns;\n   Veto: J3 (anti-kt-0.4): et>40 GeV, abseta < 2.5, EMF < 0.02, -1 ns < ArrivalTime < 5 ns;\n   PV1 (primary-vertex): NTrack >= 3, pT>1 GeV;\n   NTrack(J1, DR=0.2, pT>1) = 0;\n   NTrack(J2, DR=0.2, pT>1) = 0;\n   ETMiss (atlas-ref) < 50 GeV;\n```\n\n#The current state\n\nIt will parse the below definition just fine. Two obvious things are missing:\n\n   - Using a \".\" in a base definition name.\n   - \"Veto:\" is not yet implemented.\n\nBoth of these shouldn't be hard to add. There are a number of issues in the code:\n\n   - Look for TODO to see notes about things that are poorly implemented or otherwise. This is not production code!!\n   - We need a more general expression to parse things in ANTLR4, the current scheme is rather messy and\n     involves a really ugly set of parsing interpreting code. Someone who knows how better to use g4 will quickly\n\t recognize my mistakes, and perhaps, solutions. :-)\n   - There are places where this DSL is ambiguous, and only if the lexer has some context awareness can the ambiguities be\n     removed.\n   - Some thought has to go into how the functions are represented in OWL, perhaps for general searching they are\n     currently general enough.\n   - ETMiss is an object, and a quantity (e.g. ETMiss.ET is the way you shoudl write it, but everyone will want to write ETMiss).\n     We need some sort of common abbreviations to handle that.\n   - Nuget has an interesting RDFSharp library that seems to have classes for dealing with ontologies. It would be cool to fit this in there.\n     In particular because it seems to have normalized i/o routines\n\nHere is the DSL it does parse:\n\n```\n   J1 (anti-kt-04): et>60 GeV, abseta < 2.5, EMF < 0.02, -1 ns < ArrivalTime < 5 ns;\n   J2 (anti-kt-04): et>40 GeV, abseta < 2.5, EMF < 0.02, -1 ns < ArrivalTime < 5 ns;\n   PV1 (primary-vertex): NTrack >= 3, pT>1 GeV;\n   NTrack(J1, DR=0.2, pT>1) = 0;\n   NTrack(J2, DR=0.2, pT>1) = 0;\n   ETMiss (atlas-ref) < 50 GeV;\n```\n\nThe OWL dump for this looks like the following:\n\n```\n@prefix owl: <http://www.w3.org/2002/07/owl#> .\n@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .\n@prefix xml: <http://www.w3.org/XML/1998/namespace> .\n@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .\n@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .\n@prefix dfs: <https://w3id.org/daspos/detectorfinalstate#> .\n@prefix qudt: <http://qudt.org/1.1/schema/qudt#> .\n@prefix unit: <http://qudt.org/1.1/vocab/unit#> .\n@prefix atlas: <http://www.atlas.ch/papers/namespace> .\n@base <http://example.org/ns/> .\n\natlas:J1 rdf:type dfs:PhysicsObject ;\n  dfs:hasBaseDefinition \"anti-kt-04\" .\n\natlas:J2 rdf:type dfs:PhysicsObject ;\n  dfs:hasBaseDefinition \"anti-kt-04\" .\n\natlas:PV1 rdf:type dfs:PhysicsObject ;\n  dfs:hasBaseDefinition \"primary-vertex\" .\n\natlas:ETMiss rdf:type dfs:PhysicsObject ;\n  dfs:hasBaseDefinition \"atlas-ref\" .\n\natlas:physicalQuantity0 rdf:type dfs:PhysicalQuantity ;\n  dfs:refersToObject atlas:J1 ;\n  dfs:refersToFinalStateObjectProperty dfs:et .\n\natlas:number1 rdf:type qudt:QuantityValue ;\n  qudt:numericValue \"60\"^^xsd:decimal ;\n  qudt:unit unit:GigaElectronVolt .\n\natlas:selectionCriteria2 rdf:type dfs:SelectionCriteria ;\n  dfs:usesBinaryRelation dfs:greaterThan ;\n  dfs:hasFirstArgument atlas:physicalQuantity0 ;\n  dfs:hasSecondArgument atlas:number1 .\n\natlas:physicalQuantity3 rdf:type dfs:PhysicalQuantity ;\n  dfs:refersToObject atlas:J1 ;\n  dfs:refersToFinalStateObjectProperty dfs:abseta .\n\natlas:number4 rdf:type qudt:QuantityValue ;\n  qudt:numericValue \"2.5\"^^xsd:decimal .\n\natlas:selectionCriteria5 rdf:type dfs:SelectionCriteria ;\n  dfs:usesBinaryRelation dfs:lessThan ;\n  dfs:hasFirstArgument atlas:physicalQuantity3 ;\n  dfs:hasSecondArgument atlas:number4 .\n\natlas:physicalQuantity6 rdf:type dfs:PhysicalQuantity ;\n  dfs:refersToObject atlas:J1 ;\n  dfs:refersToFinalStateObjectProperty dfs:EMF .\n\natlas:number7 rdf:type qudt:QuantityValue ;\n  qudt:numericValue \"0.02\"^^xsd:decimal .\n\natlas:selectionCriteria8 rdf:type dfs:SelectionCriteria ;\n  dfs:usesBinaryRelation dfs:lessThan ;\n  dfs:hasFirstArgument atlas:physicalQuantity6 ;\n  dfs:hasSecondArgument atlas:number7 .\n\natlas:number9 rdf:type qudt:QuantityValue ;\n  qudt:numericValue \"-1E-09\"^^xsd:decimal ;\n  qudt:unit unit:SecondTime .\n\natlas:physicalQuantity10 rdf:type dfs:PhysicalQuantity ;\n  dfs:refersToObject atlas:J1 ;\n  dfs:refersToFinalStateObjectProperty dfs:ArrivalTime .\n\natlas:selectionCriteria11 rdf:type dfs:SelectionCriteria ;\n  dfs:usesBinaryRelation dfs:lessThan ;\n  dfs:hasFirstArgument atlas:number9 ;\n  dfs:hasSecondArgument atlas:physicalQuantity10 .\n\natlas:physicalQuantity12 rdf:type dfs:PhysicalQuantity ;\n  dfs:refersToObject atlas:J1 ;\n  dfs:refersToFinalStateObjectProperty dfs:ArrivalTime .\n\natlas:number13 rdf:type qudt:QuantityValue ;\n  qudt:numericValue \"5E-09\"^^xsd:decimal ;\n  qudt:unit unit:SecondTime .\n\natlas:selectionCriteria14 rdf:type dfs:SelectionCriteria ;\n  dfs:usesBinaryRelation dfs:lessThan ;\n  dfs:hasFirstArgument atlas:physicalQuantity12 ;\n  dfs:hasSecondArgument atlas:number13 .\n\natlas:physicalQuantity15 rdf:type dfs:PhysicalQuantity ;\n  dfs:refersToObject atlas:J2 ;\n  dfs:refersToFinalStateObjectProperty dfs:et .\n\natlas:number16 rdf:type qudt:QuantityValue ;\n  qudt:numericValue \"40\"^^xsd:decimal ;\n  qudt:unit unit:GigaElectronVolt .\n\natlas:selectionCriteria17 rdf:type dfs:SelectionCriteria ;\n  dfs:usesBinaryRelation dfs:greaterThan ;\n  dfs:hasFirstArgument atlas:physicalQuantity15 ;\n  dfs:hasSecondArgument atlas:number16 .\n\natlas:physicalQuantity18 rdf:type dfs:PhysicalQuantity ;\n  dfs:refersToObject atlas:J2 ;\n  dfs:refersToFinalStateObjectProperty dfs:abseta .\n\natlas:number19 rdf:type qudt:QuantityValue ;\n  qudt:numericValue \"2.5\"^^xsd:decimal .\n\natlas:selectionCriteria20 rdf:type dfs:SelectionCriteria ;\n  dfs:usesBinaryRelation dfs:lessThan ;\n  dfs:hasFirstArgument atlas:physicalQuantity18 ;\n  dfs:hasSecondArgument atlas:number19 .\n\natlas:physicalQuantity21 rdf:type dfs:PhysicalQuantity ;\n  dfs:refersToObject atlas:J2 ;\n  dfs:refersToFinalStateObjectProperty dfs:EMF .\n\natlas:number22 rdf:type qudt:QuantityValue ;\n  qudt:numericValue \"0.02\"^^xsd:decimal .\n\natlas:selectionCriteria23 rdf:type dfs:SelectionCriteria ;\n  dfs:usesBinaryRelation dfs:lessThan ;\n  dfs:hasFirstArgument atlas:physicalQuantity21 ;\n  dfs:hasSecondArgument atlas:number22 .\n\natlas:number24 rdf:type qudt:QuantityValue ;\n  qudt:numericValue \"-1E-09\"^^xsd:decimal ;\n  qudt:unit unit:SecondTime .\n\natlas:physicalQuantity25 rdf:type dfs:PhysicalQuantity ;\n  dfs:refersToObject atlas:J2 ;\n  dfs:refersToFinalStateObjectProperty dfs:ArrivalTime .\n\natlas:selectionCriteria26 rdf:type dfs:SelectionCriteria ;\n  dfs:usesBinaryRelation dfs:lessThan ;\n  dfs:hasFirstArgument atlas:number24 ;\n  dfs:hasSecondArgument atlas:physicalQuantity25 .\n\natlas:physicalQuantity27 rdf:type dfs:PhysicalQuantity ;\n  dfs:refersToObject atlas:J2 ;\n  dfs:refersToFinalStateObjectProperty dfs:ArrivalTime .\n\natlas:number28 rdf:type qudt:QuantityValue ;\n  qudt:numericValue \"5E-09\"^^xsd:decimal ;\n  qudt:unit unit:SecondTime .\n\natlas:selectionCriteria29 rdf:type dfs:SelectionCriteria ;\n  dfs:usesBinaryRelation dfs:lessThan ;\n  dfs:hasFirstArgument atlas:physicalQuantity27 ;\n  dfs:hasSecondArgument atlas:number28 .\n\natlas:physicalQuantity30 rdf:type dfs:PhysicalQuantity ;\n  dfs:refersToObject atlas:PV1 ;\n  dfs:refersToFinalStateObjectProperty dfs:NTrack .\n\natlas:number31 rdf:type qudt:QuantityValue ;\n  qudt:numericValue \"3\"^^xsd:decimal .\n\natlas:selectionCriteria32 rdf:type dfs:SelectionCriteria ;\n  dfs:usesBinaryRelation dfs:greaterEqual ;\n  dfs:hasFirstArgument atlas:physicalQuantity30 ;\n  dfs:hasSecondArgument atlas:number31 .\n\natlas:physicalQuantity33 rdf:type dfs:PhysicalQuantity ;\n  dfs:refersToObject atlas:PV1 ;\n  dfs:refersToFinalStateObjectProperty dfs:pT .\n\natlas:number34 rdf:type qudt:QuantityValue ;\n  qudt:numericValue \"1\"^^xsd:decimal ;\n  qudt:unit unit:GigaElectronVolt .\n\natlas:selectionCriteria35 rdf:type dfs:SelectionCriteria ;\n  dfs:usesBinaryRelation dfs:greaterThan ;\n  dfs:hasFirstArgument atlas:physicalQuantity33 ;\n  dfs:hasSecondArgument atlas:number34 .\n\natlas:functionQuantity36 rdf:type dfs:PhysicalQuantity ;\n  dfs:refersToObject atlas:J1 , atlas:FuncArgNTrack ;\n  dfs:hasQuantity \"NTrack(J1, DR=0.2, pT>1)\" .\n\natlas:number37 rdf:type qudt:QuantityValue ;\n  qudt:numericValue \"0\"^^xsd:decimal .\n\natlas:selectionCriteria38 rdf:type dfs:SelectionCriteria ;\n  dfs:usesBinaryRelation dfs:equal ;\n  dfs:hasFirstArgument atlas:functionQuantity36 ;\n  dfs:hasSecondArgument atlas:number37 .\n\natlas:functionQuantity39 rdf:type dfs:PhysicalQuantity ;\n  dfs:refersToObject atlas:J2 , atlas:FuncArgNTrack ;\n  dfs:hasQuantity \"NTrack(J2, DR=0.2, pT>1)\" .\n\natlas:number40 rdf:type qudt:QuantityValue ;\n  qudt:numericValue \"0\"^^xsd:decimal .\n\natlas:selectionCriteria41 rdf:type dfs:SelectionCriteria ;\n  dfs:usesBinaryRelation dfs:equal ;\n  dfs:hasFirstArgument atlas:functionQuantity39 ;\n  dfs:hasSecondArgument atlas:number40 .\n\natlas:physicalQuantity42 rdf:type dfs:PhysicalQuantity ;\n  dfs:refersToObject atlas:ETMiss ;\n  dfs:refersToFinalStateObjectProperty dfs: .\n\natlas:number43 rdf:type qudt:QuantityValue ;\n  qudt:numericValue \"50\"^^xsd:decimal ;\n  qudt:unit unit:GigaElectronVolt .\n\natlas:selectionCriteria44 rdf:type dfs:SelectionCriteria ;\n  dfs:usesBinaryRelation dfs:lessThan ;\n  dfs:hasFirstArgument atlas:physicalQuantity42 ;\n  dfs:hasSecondArgument atlas:number43 .\n\natlas:andor45 rdf:type dfs:And ;\n  dfs:hasOperand atlas:selectionCriteria2 , atlas:selectionCriteria5 , atlas:selectionCriteria8 , atlas:selectionCriteria11 , atlas:selectionCriteria14 ,\n  atlas:selectionCriteria17 , atlas:selectionCriteria20 , atlas:selectionCriteria23 , atlas:selectionCriteria26 , atlas:selectionCriteria29 , \n  atlas:selectionCriteria32 , atlas:selectionCriteria35 , atlas:selectionCriteria38 , atlas:selectionCriteria41 , atlas:selectionCriteria44 .\n\natlas:detectorFinalState46 rdf:type dfs:DetectorFinalState ;\n  dfs:hasSelectionCriteria atlas:andor45 .\n\n```\n\n# Development\n\nThe environment for devleopment is easy to setup:\n\n1. Use Visual Stuido 2015 Community Edition (Free). It may work with older versions, like 2013, but primary development isn't done there.\n\n2. Install the Java Runtime. No need for browser integration. This is needed for the ANTLR code, which uses java to produce the parser.\n\n", 
  "id": 39353550
}